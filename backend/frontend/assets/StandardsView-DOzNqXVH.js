import{_ as Ul,T as zl,u as Sl,r as d,n as Ne,a1 as ve,q as $l,o as Fl,a as c,v as Il,c as y,b as u,g as l,F as N,f as s,x as Je,w as t,h as n,i as k,p as Te,a2 as Nl,a3 as Tl,a4 as qe,s as Pe,d as $,e as z,G as P,Z as ql,t as _,L as Ll,I as Le,k as Qe,y as El,a5 as Al,$ as fe,a6 as Dl,a7 as Ml,U as F,E as v,M as Xe}from"./index-BOoWkaEM.js";const Bl={class:"standards-view"},Ol={class:"page-header"},Rl={class:"header-actions"},jl={class:"filter-row"},Gl={class:"collections-list"},Kl=["onClick"],Wl={class:"collection-icon"},Zl={class:"collection-info"},Hl={class:"collection-name"},Jl={class:"collection-desc"},Pl={class:"collection-meta"},Ql={class:"collection-actions"},Xl={class:"detail-header"},Yl={class:"detail-title"},hl={class:"detail-tags"},et={class:"info-grid"},lt={class:"info-block"},tt={class:"info-block-value"},at={class:"info-block stats"},ot={class:"stat-box"},st={class:"stat-number"},nt={class:"stat-box"},ut={class:"stat-number"},it={key:0,class:"usage-instruction-block"},dt={class:"info-block-label"},rt={class:"usage-instruction-text"},mt={key:1,class:"usage-instruction-empty"},pt={class:"filter-row"},vt={class:"table-footer"},ft={class:"usage-instruction-wrapper"},ct={class:"usage-instruction-actions"},_t={class:"form-tip"},gt={key:0},yt={key:1},bt={key:0,class:"create-step-content"},Vt={class:"form-section"},kt={class:"focus-area-selector"},wt={key:0,class:"custom-focus-input"},Ct={key:1,class:"custom-focus-tags"},xt={class:"form-section"},Ut={class:"industry-selector"},zt={key:1,class:"create-step-content"},St={class:"collection-name-edit"},$t={class:"expand-edit-form"},Ft={class:"expand-actions"},It={class:"step2-tip"},Nt={key:2,class:"create-step-content"},Tt={class:"usage-instruction-list"},qt={class:"usage-item-header"},Lt={class:"usage-item-title"},Et={class:"create-dialog-footer"},At={__name:"StandardsView",setup(Dt){const Ee=zl(),Ae=Sl(),ce=d(!1),De=d([]),ne=d(""),ue=d(""),ie=d(""),f=d(null),Me=Ne(()=>{let o=De.value;if(ne.value){const e=ne.value.toLowerCase();o=o.filter(m=>m.name.toLowerCase().includes(e)||m.description&&m.description.toLowerCase().includes(e))}return ue.value&&(o=o.filter(e=>e.material_type===ue.value||e.material_type==="both")),o});async function O(){ce.value=!0;try{const o={};ie.value&&(o.language=ie.value);const e=await F.getCollections(o);De.value=e.data}catch(o){v.error("加载标准失败: "+o.message)}finally{ce.value=!1}}async function Be(o){f.value=o,await j(),await ke()}function Ye(){f.value=null,R.value=[],h.value="",ee.value="",Y.value=""}const Q=d(!1),_e=d(!1),ge=d(!1),X=d(null),g=ve({name:"",description:"",usage_instruction:"",material_type:"both"});function ye(o){X.value=o,g.name=o.name,g.description=o.description,g.usage_instruction=o.usage_instruction||"",g.material_type=o.material_type,Q.value=!0}async function he(){if(X.value){ge.value=!0;try{const o=await F.generateCollectionUsageInstruction(X.value.id);g.usage_instruction=o.data.usage_instruction,v.success("生成成功")}catch(o){v.error("生成失败: "+o.message)}finally{ge.value=!1}}}async function el(){if(!g.name.trim()){v.warning("集合名称不能为空");return}_e.value=!0;try{await F.updateCollection(X.value.id,{name:g.name,description:g.description,usage_instruction:g.usage_instruction||null,material_type:g.material_type}),v.success("更新成功"),Q.value=!1,f.value&&f.value.id===X.value.id&&(f.value.name=g.name,f.value.description=g.description,f.value.usage_instruction=g.usage_instruction,f.value.material_type=g.material_type),O()}catch(o){v.error("更新失败: "+o.message)}finally{_e.value=!1}}async function ll(o){if(o.is_preset){v.warning("系统预设集合不可删除");return}try{await Xe.confirm(`确定要删除标准「${o.name}」吗？该标准内的所有审核条目将一并删除。`,"确认删除",{type:"warning"}),await F.deleteCollection(o.id),v.success("删除成功"),O()}catch(e){e!=="cancel"&&v.error("删除失败: "+e.message)}}const be=d(!1),R=d([]),Ve=d([]),Y=d(""),h=d(""),ee=d("");async function j(){if(f.value){be.value=!0;try{const o={};h.value&&(o.category=h.value),ee.value&&(o.risk_level=ee.value),Y.value&&(o.keyword=Y.value);const e=await F.getCollectionStandards(f.value.id,o);R.value=e.data}catch(o){v.error("加载风险点失败: "+o.message)}finally{be.value=!1}}}async function ke(){if(f.value)try{const o=await F.getCollectionCategories(f.value.id);Ve.value=o.data}catch(o){console.error("加载分类失败:",o)}}let Oe=null;function tl(){clearTimeout(Oe),Oe=setTimeout(()=>{j()},300)}const G=d(!1),K=d(!1),W=d(null),w=ve({category:"",item:"",description:"",risk_level:"medium",applicable_to:["contract","marketing"]});function al(o){W.value=o,Object.assign(w,{category:o.category,item:o.item,description:o.description,risk_level:o.risk_level,applicable_to:o.applicable_to||["contract","marketing"]}),G.value=!0}async function ol(){if(!w.category||!w.item||!w.description){v.warning("请填写必填字段");return}K.value=!0;try{W.value?(await F.updateLibraryStandard(W.value.id,w),v.success("更新成功")):(await F.addStandardToCollection(f.value.id,w),v.success("添加成功")),G.value=!1,Re(),j(),ke(),f.value.standard_count=R.value.length+(W.value?0:1)}catch(o){v.error("保存失败: "+o.message)}finally{K.value=!1}}async function sl(o){try{await Xe.confirm(`确定要删除风险点「${o.item}」吗？`,"确认删除",{type:"warning"}),await F.deleteLibraryStandard(o.id),v.success("删除成功"),j(),ke(),f.value.standard_count--}catch(e){e!=="cancel"&&v.error("删除失败: "+e.message)}}function Re(){W.value=null,Object.assign(w,{category:"",item:"",description:"",risk_level:"medium",applicable_to:["contract","marketing"]})}const le=d(!1),Z=d(1),te=d(null),H=d([]),we=d(!1),C=ve({name:"",description:"",material_type:"both",language:"zh-CN"});function nl(o){te.value=o.raw}async function ul(){if(te.value){if(!C.name.trim()){v.warning("请先输入集合名称");return}we.value=!0;try{const o=await F.previewStandards(te.value);H.value=o.data.standards,Z.value=2,v.success(`解析成功，共 ${o.data.total_count} 条标准`)}catch(o){v.error("解析失败: "+o.message)}finally{we.value=!1}}}async function il(){if(H.value.length){K.value=!0;try{const o=await F.saveToLibrary({collection_name:C.name,collection_description:C.description,material_type:C.material_type,language:C.language,standards:H.value});v.success(o.data.message),le.value=!1,je(),O()}catch(o){v.error("保存失败: "+o.message)}finally{K.value=!1}}}function je(){Z.value=1,te.value=null,H.value=[],Object.assign(C,{name:"",description:"",material_type:"both",language:"zh-CN"})}const D=d(!1),S=d(1),Ce=d(!1),xe=d(!1),T=d([]),E=d(""),de=d(""),i=ve({document_type:"contract",business_scenario:"",focus_areas:[],our_role:"",industry:"",special_risks:"",reference_material:"",custom_industry:"",language:"zh-CN"}),ae=d(!1),J=d(""),A=d([]);function Ge(){const o=J.value.trim();o&&!A.value.includes(o)&&(A.value.push(o),J.value="",ae.value=!1)}function dl(o){A.value.splice(o,1)}const rl=["合同主体资格","权利义务条款","费用与支付","违约责任","知识产权","保密条款","争议解决","合规性要求"],ml=["信息技术/互联网","金融/保险","制造业","房地产/建筑","医疗/生物","零售/消费"],pl=Ne(()=>["制作审核标准","预览编辑标准","确认入库"][S.value-1]),Ke=Ne(()=>i.business_scenario.trim()&&(i.focus_areas.length>0||A.value.length>0));async function vl(){var o,e;if(!Ke.value){v.warning("请填写业务场景和至少一个关注点");return}Ce.value=!0;try{const m=[...i.focus_areas,...A.value],r=i.custom_industry.trim()||i.industry,M=await F.createStandardsFromBusiness({document_type:i.document_type,business_scenario:i.business_scenario,focus_areas:m,our_role:i.our_role||null,industry:r||null,special_risks:i.special_risks||null,reference_material:i.reference_material||null,language:i.language});T.value=M.data.standards,E.value=M.data.collection_name||"",de.value=M.data.generation_summary||`成功生成 ${M.data.standards.length} 条标准`,S.value=2,v.success("标准生成成功")}catch(m){v.error("生成标准失败: "+(((e=(o=m.response)==null?void 0:o.data)==null?void 0:e.detail)||m.message))}finally{Ce.value=!1}}function fl(o){T.value.splice(o,1)}async function cl(){if(!T.value.length){v.warning("没有可保存的标准");return}if(!E.value.trim()){v.warning("请输入标准名称");return}xe.value=!0;try{const o=await F.saveToLibrary({collection_name:E.value,collection_description:i.business_scenario,material_type:i.document_type==="both"?"both":i.document_type,language:i.language,standards:T.value});v.success(o.data.message||"标准保存成功"),D.value=!1,We(),O()}catch(o){v.error("保存失败: "+o.message)}finally{xe.value=!1}}function We(){S.value=1,Object.assign(i,{document_type:"contract",business_scenario:"",focus_areas:[],our_role:"",industry:"",special_risks:"",reference_material:"",custom_industry:"",language:"zh-CN"}),A.value=[],J.value="",ae.value=!1,T.value=[],E.value="",de.value=""}function Ue(o){return{high:"danger",medium:"warning",low:"success"}[o]||"info"}function re(o){return{high:"高",medium:"中",low:"低"}[o]||o}function _l(o){return o?o.map(e=>e==="contract"?"合同":"营销").join("、"):""}function Ze(o){return{contract:"合同",marketing:"营销材料",both:"合同/营销"}[o]||o}function gl(o){return{"zh-CN":"中文",en:"English"}[o]||o||"中文"}function yl(o){o==="upload"?le.value=!0:o==="ai"&&(D.value=!0)}return $l(()=>Ee.query.action,o=>{o==="ai-create"&&(D.value=!0,Ae.replace({query:{}}))}),Fl(async()=>{await O(),Ee.query.action==="ai-create"&&(D.value=!0,Ae.replace({query:{}}))}),(o,e)=>{const m=c("el-icon"),r=c("el-button"),M=c("el-dropdown-item"),bl=c("el-dropdown-menu"),Vl=c("el-dropdown"),b=c("el-input"),V=c("el-option"),q=c("el-select"),me=c("el-card"),kl=c("el-empty"),L=c("el-tag"),x=c("el-table-column"),ze=c("el-table"),p=c("el-form-item"),oe=c("el-checkbox"),Se=c("el-checkbox-group"),se=c("el-form"),pe=c("el-dialog"),B=c("el-radio"),$e=c("el-radio-group"),wl=c("el-divider"),Cl=c("el-upload"),Fe=c("el-alert"),Ie=c("el-step"),xl=c("el-steps"),He=Il("loading");return u(),y("div",Bl,[f.value?(u(),y(N,{key:1},[s("div",Xl,[l(r,{text:"",onClick:Ye},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Al))]),_:1}),e[58]||(e[58]=n(" 返回列表 ",-1))]),_:1}),s("div",Yl,[s("h2",null,_(f.value.name),1),s("div",hl,[f.value.is_preset?(u(),$(L,{key:0,size:"small",type:"info"},{default:t(()=>[...e[59]||(e[59]=[n("系统预设",-1)])]),_:1})):z("",!0),f.value.language==="en"?(u(),$(L,{key:1,size:"small",type:"success"},{default:t(()=>[...e[60]||(e[60]=[n("EN",-1)])]),_:1})):z("",!0),l(L,{size:"small"},{default:t(()=>[n(_(Ze(f.value.material_type)),1)]),_:1})])]),l(r,{type:"primary",text:"",onClick:e[3]||(e[3]=a=>ye(f.value))},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Qe))]),_:1}),e[61]||(e[61]=n(" 编辑信息 ",-1))]),_:1})]),l(me,{class:"collection-info-card"},{default:t(()=>[s("div",et,[s("div",lt,[e[62]||(e[62]=s("div",{class:"info-block-label"},"适用场景",-1)),s("div",tt,_(f.value.description||"暂无描述"),1)]),s("div",at,[s("div",ot,[s("div",st,_(R.value.length),1),e[63]||(e[63]=s("div",{class:"stat-text"},"审核条目",-1))]),s("div",nt,[s("div",ut,_(Ve.value.length),1),e[64]||(e[64]=s("div",{class:"stat-text"},"分类",-1))])])]),f.value.usage_instruction?(u(),y("div",it,[s("div",dt,[l(m,null,{default:t(()=>[l(k(fe))]),_:1}),e[65]||(e[65]=n(" 适用说明（用于智能推荐） ",-1))]),s("div",rt,_(f.value.usage_instruction),1)])):(u(),y("div",mt,[l(m,null,{default:t(()=>[l(k(fe))]),_:1}),e[67]||(e[67]=s("span",null,"尚未设置适用说明，",-1)),l(r,{type:"primary",text:"",size:"small",onClick:e[4]||(e[4]=a=>ye(f.value))},{default:t(()=>[...e[66]||(e[66]=[n(" 点击编辑 ",-1)])]),_:1}),e[68]||(e[68]=s("span",null,"或使用 AI 自动生成",-1))]))]),_:1}),l(me,{class:"filter-card"},{default:t(()=>[s("div",pt,[l(b,{modelValue:Y.value,"onUpdate:modelValue":e[5]||(e[5]=a=>Y.value=a),placeholder:"搜索审核条目...",clearable:"",style:{width:"300px"},onInput:tl},{prefix:t(()=>[l(m,null,{default:t(()=>[l(k(Pe))]),_:1})]),_:1},8,["modelValue"]),l(q,{modelValue:h.value,"onUpdate:modelValue":e[6]||(e[6]=a=>h.value=a),placeholder:"选择分类",clearable:"",style:{width:"200px"},onChange:j},{default:t(()=>[(u(!0),y(N,null,P(Ve.value,a=>(u(),$(V,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(q,{modelValue:ee.value,"onUpdate:modelValue":e[7]||(e[7]=a=>ee.value=a),placeholder:"风险等级",clearable:"",style:{width:"150px"},onChange:j},{default:t(()=>[l(V,{label:"高",value:"high"}),l(V,{label:"中",value:"medium"}),l(V,{label:"低",value:"low"})]),_:1},8,["modelValue"]),l(r,{type:"primary",onClick:e[8]||(e[8]=a=>G.value=!0)},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Te))]),_:1}),e[69]||(e[69]=n(" 添加审核条目 ",-1))]),_:1})])]),_:1}),l(me,{class:"table-card"},{default:t(()=>[Je((u(),$(ze,{data:R.value,stripe:"",style:{width:"100%"}},{default:t(()=>[l(x,{prop:"category",label:"分类",width:"120"}),l(x,{prop:"item",label:"审核要点","min-width":"180"}),l(x,{prop:"description",label:"说明","min-width":"250","show-overflow-tooltip":""}),l(x,{label:"风险等级",width:"100",align:"center"},{default:t(({row:a})=>[l(L,{type:Ue(a.risk_level),size:"small"},{default:t(()=>[n(_(re(a.risk_level)),1)]),_:2},1032,["type"])]),_:1}),l(x,{label:"适用类型",width:"120"},{default:t(({row:a})=>[s("span",null,_(_l(a.applicable_to)),1)]),_:1}),l(x,{label:"操作",width:"150",fixed:"right"},{default:t(({row:a})=>[l(r,{type:"primary",text:"",size:"small",onClick:I=>al(a)},{default:t(()=>[...e[70]||(e[70]=[n(" 编辑 ",-1)])]),_:1},8,["onClick"]),l(r,{type:"danger",text:"",size:"small",onClick:I=>sl(a)},{default:t(()=>[...e[71]||(e[71]=[n(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[He,be.value]]),s("div",vt,[s("span",null,"共 "+_(R.value.length)+" 条审核条目",1)])]),_:1})],64)):(u(),y(N,{key:0},[s("div",Ol,[e[50]||(e[50]=s("div",{class:"header-left"},[s("h1",null,"审核标准管理"),s("p",{class:"subtitle"},"管理审核标准，每套标准包含若干审核条目")],-1)),s("div",Rl,[l(Vl,{trigger:"click",onCommand:yl},{dropdown:t(()=>[l(bl,null,{default:t(()=>[l(M,{command:"upload"},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Tl))]),_:1}),e[48]||(e[48]=n(" 上传新标准 ",-1))]),_:1}),l(M,{command:"ai"},{default:t(()=>[l(m,null,{default:t(()=>[l(k(qe))]),_:1}),e[49]||(e[49]=n(" AI辅助制作 ",-1))]),_:1})]),_:1})]),default:t(()=>[l(r,{type:"primary"},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Te))]),_:1}),e[47]||(e[47]=n(" 新建标准 ",-1)),l(m,{class:"el-icon--right"},{default:t(()=>[l(k(Nl))]),_:1})]),_:1})]),_:1})])]),l(me,{class:"filter-card"},{default:t(()=>[s("div",jl,[l(b,{modelValue:ne.value,"onUpdate:modelValue":e[0]||(e[0]=a=>ne.value=a),placeholder:"搜索标准...",clearable:"",style:{width:"300px"}},{prefix:t(()=>[l(m,null,{default:t(()=>[l(k(Pe))]),_:1})]),_:1},8,["modelValue"]),l(q,{modelValue:ue.value,"onUpdate:modelValue":e[1]||(e[1]=a=>ue.value=a),placeholder:"材料类型",clearable:"",style:{width:"150px"}},{default:t(()=>[l(V,{label:"合同",value:"contract"}),l(V,{label:"营销材料",value:"marketing"})]),_:1},8,["modelValue"]),l(q,{modelValue:ie.value,"onUpdate:modelValue":e[2]||(e[2]=a=>ie.value=a),placeholder:"标准语言",clearable:"",style:{width:"150px"},onChange:O},{default:t(()=>[l(V,{label:"中文",value:"zh-CN"}),l(V,{label:"English",value:"en"})]),_:1},8,["modelValue"])])]),_:1}),Je((u(),y("div",Gl,[Me.value.length===0?(u(),$(kl,{key:0,description:"暂无标准"})):z("",!0),(u(!0),y(N,null,P(Me.value,a=>(u(),y("div",{key:a.id,class:"collection-card"},[s("div",{class:"collection-card-main",onClick:I=>Be(a)},[s("div",Wl,[l(m,{size:24},{default:t(()=>[l(k(ql))]),_:1})]),s("div",Zl,[s("div",Hl,[n(_(a.name)+" ",1),a.is_preset?(u(),$(L,{key:0,size:"small",type:"info"},{default:t(()=>[...e[51]||(e[51]=[n("系统预设",-1)])]),_:1})):z("",!0),a.language==="en"?(u(),$(L,{key:1,size:"small",type:"success"},{default:t(()=>[...e[52]||(e[52]=[n("EN",-1)])]),_:1})):z("",!0)]),s("div",Jl,_(a.description||"暂无描述"),1),s("div",Pl,[s("span",null,_(a.standard_count)+" 条审核条目",1),e[53]||(e[53]=s("span",{class:"meta-sep"},"|",-1)),s("span",null,_(Ze(a.material_type)),1),e[54]||(e[54]=s("span",{class:"meta-sep"},"|",-1)),s("span",null,_(gl(a.language)),1)])])],8,Kl),s("div",Ql,[l(r,{text:"",type:"primary",onClick:Le(I=>Be(a),["stop"])},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Ll))]),_:1}),e[55]||(e[55]=n(" 查看 ",-1))]),_:1},8,["onClick"]),l(r,{text:"",type:"primary",onClick:Le(I=>ye(a),["stop"])},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Qe))]),_:1}),e[56]||(e[56]=n(" 编辑 ",-1))]),_:1},8,["onClick"]),l(r,{text:"",type:"danger",onClick:Le(I=>ll(a),["stop"]),disabled:a.is_preset},{default:t(()=>[l(m,null,{default:t(()=>[l(k(El))]),_:1}),e[57]||(e[57]=n(" 删除 ",-1))]),_:1},8,["onClick","disabled"])])]))),128))])),[[He,ce.value]])],64)),l(pe,{modelValue:G.value,"onUpdate:modelValue":e[15]||(e[15]=a=>G.value=a),title:W.value?"编辑审核条目":"添加审核条目",width:"600px",onClose:Re},{footer:t(()=>[l(r,{onClick:e[14]||(e[14]=a=>G.value=!1)},{default:t(()=>[...e[74]||(e[74]=[n("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:ol,loading:K.value},{default:t(()=>[...e[75]||(e[75]=[n(" 保存 ",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(se,{model:w,"label-width":"100px"},{default:t(()=>[l(p,{label:"分类",required:""},{default:t(()=>[l(b,{modelValue:w.category,"onUpdate:modelValue":e[9]||(e[9]=a=>w.category=a),placeholder:"如：主体资格、权利义务"},null,8,["modelValue"])]),_:1}),l(p,{label:"审核要点",required:""},{default:t(()=>[l(b,{modelValue:w.item,"onUpdate:modelValue":e[10]||(e[10]=a=>w.item=a),placeholder:"简要描述审核要点"},null,8,["modelValue"])]),_:1}),l(p,{label:"详细说明",required:""},{default:t(()=>[l(b,{modelValue:w.description,"onUpdate:modelValue":e[11]||(e[11]=a=>w.description=a),type:"textarea",rows:3,placeholder:"详细的审核说明"},null,8,["modelValue"])]),_:1}),l(p,{label:"风险等级"},{default:t(()=>[l(q,{modelValue:w.risk_level,"onUpdate:modelValue":e[12]||(e[12]=a=>w.risk_level=a),style:{width:"100%"}},{default:t(()=>[l(V,{label:"高",value:"high"}),l(V,{label:"中",value:"medium"}),l(V,{label:"低",value:"low"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"适用类型"},{default:t(()=>[l(Se,{modelValue:w.applicable_to,"onUpdate:modelValue":e[13]||(e[13]=a=>w.applicable_to=a)},{default:t(()=>[l(oe,{label:"contract"},{default:t(()=>[...e[72]||(e[72]=[n("合同",-1)])]),_:1}),l(oe,{label:"marketing"},{default:t(()=>[...e[73]||(e[73]=[n("营销材料",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),l(pe,{modelValue:Q.value,"onUpdate:modelValue":e[21]||(e[21]=a=>Q.value=a),title:"编辑标准信息",width:"600px"},{footer:t(()=>[l(r,{onClick:e[20]||(e[20]=a=>Q.value=!1)},{default:t(()=>[...e[78]||(e[78]=[n("取消",-1)])]),_:1}),l(r,{type:"primary",onClick:el,loading:_e.value},{default:t(()=>[...e[79]||(e[79]=[n(" 保存 ",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(se,{model:g,"label-width":"100px"},{default:t(()=>[l(p,{label:"标准名称",required:""},{default:t(()=>[l(b,{modelValue:g.name,"onUpdate:modelValue":e[16]||(e[16]=a=>g.name=a),placeholder:"如：电商平台合作协议审核标准"},null,8,["modelValue"])]),_:1}),l(p,{label:"适用场景"},{default:t(()=>[l(b,{modelValue:g.description,"onUpdate:modelValue":e[17]||(e[17]=a=>g.description=a),type:"textarea",rows:2,placeholder:"描述该标准的适用场景"},null,8,["modelValue"])]),_:1}),l(p,{label:"适用说明"},{default:t(()=>[s("div",ft,[l(b,{modelValue:g.usage_instruction,"onUpdate:modelValue":e[18]||(e[18]=a=>g.usage_instruction=a),type:"textarea",rows:4,placeholder:"用于智能推荐的详细说明，例如：适用于各类商务合同的法务审阅，包括采购合同、销售合同、服务合同等。重点关注合同主体资格、权利义务平衡、付款条款、违约责任等核心条款。",class:"usage-instruction-textarea"},null,8,["modelValue"]),s("div",ct,[l(r,{type:"primary",size:"small",onClick:he,loading:ge.value},{default:t(()=>[l(m,null,{default:t(()=>[l(k(qe))]),_:1}),e[76]||(e[76]=n(" AI 生成 ",-1))]),_:1},8,["loading"])])]),s("div",_t,[l(m,null,{default:t(()=>[l(k(fe))]),_:1}),e[77]||(e[77]=n(" 适用说明用于智能推荐功能，帮助 AI 判断该标准是否适合审阅文档 ",-1))])]),_:1}),l(p,{label:"材料类型"},{default:t(()=>[l(q,{modelValue:g.material_type,"onUpdate:modelValue":e[19]||(e[19]=a=>g.material_type=a),style:{width:"100%"}},{default:t(()=>[l(V,{label:"合同",value:"contract"}),l(V,{label:"营销材料",value:"marketing"}),l(V,{label:"两者都适用",value:"both"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(pe,{modelValue:le.value,"onUpdate:modelValue":e[28]||(e[28]=a=>le.value=a),title:"上传审核标准",width:"700px",onClose:je},{footer:t(()=>[l(r,{onClick:e[26]||(e[26]=a=>le.value=!1)},{default:t(()=>[...e[84]||(e[84]=[n("取消",-1)])]),_:1}),Z.value===1?(u(),$(r,{key:0,type:"primary",onClick:ul,loading:we.value,disabled:!te.value||!C.name},{default:t(()=>[...e[85]||(e[85]=[n(" 预览 ",-1)])]),_:1},8,["loading","disabled"])):(u(),$(r,{key:1,onClick:e[27]||(e[27]=a=>Z.value=1)},{default:t(()=>[...e[86]||(e[86]=[n(" 上一步 ",-1)])]),_:1})),Z.value===2?(u(),$(r,{key:2,type:"primary",onClick:il,loading:K.value},{default:t(()=>[...e[87]||(e[87]=[n(" 确认入库 ",-1)])]),_:1},8,["loading"])):z("",!0)]),default:t(()=>[Z.value===1?(u(),y("div",gt,[l(se,{model:C,"label-width":"100px"},{default:t(()=>[l(p,{label:"标准名称",required:""},{default:t(()=>[l(b,{modelValue:C.name,"onUpdate:modelValue":e[22]||(e[22]=a=>C.name=a),placeholder:"如：电商平台合作协议审核标准"},null,8,["modelValue"])]),_:1}),l(p,{label:"适用场景"},{default:t(()=>[l(b,{modelValue:C.description,"onUpdate:modelValue":e[23]||(e[23]=a=>C.description=a),type:"textarea",rows:2,placeholder:"描述该标准的适用场景"},null,8,["modelValue"])]),_:1}),l(p,{label:"材料类型"},{default:t(()=>[l(q,{modelValue:C.material_type,"onUpdate:modelValue":e[24]||(e[24]=a=>C.material_type=a),style:{width:"100%"}},{default:t(()=>[l(V,{label:"合同",value:"contract"}),l(V,{label:"营销材料",value:"marketing"}),l(V,{label:"两者都适用",value:"both"})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"标准语言"},{default:t(()=>[l($e,{modelValue:C.language,"onUpdate:modelValue":e[25]||(e[25]=a=>C.language=a)},{default:t(()=>[l(B,{value:"zh-CN"},{default:t(()=>[...e[80]||(e[80]=[n("中文",-1)])]),_:1}),l(B,{value:"en"},{default:t(()=>[...e[81]||(e[81]=[n("English",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),l(wl),l(Cl,{ref:"uploadRef",drag:"","auto-upload":!1,"on-change":nl,accept:".xlsx,.xls,.csv,.docx,.md,.txt"},{tip:t(()=>[...e[82]||(e[82]=[s("div",{class:"el-upload__tip"}," 支持 Excel (.xlsx/.xls)、CSV、Word (.docx)、Markdown (.md)、文本 (.txt) 格式 ",-1)])]),default:t(()=>[l(m,{class:"el-icon--upload"},{default:t(()=>[l(k(Dl))]),_:1}),e[83]||(e[83]=s("div",{class:"el-upload__text"},[n(" 拖拽文件到此处，或 "),s("em",null,"点击上传")],-1))]),_:1},512)])):(u(),y("div",yt,[l(Fe,{type:"success",closable:!1,style:{"margin-bottom":"16px"}},{default:t(()=>[n(" 解析成功，将创建标准「"+_(C.name)+"」，共 "+_(H.value.length)+" 条审核条目 ",1)]),_:1}),l(ze,{data:H.value,"max-height":"400",size:"small"},{default:t(()=>[l(x,{prop:"category",label:"分类",width:"100"}),l(x,{prop:"item",label:"审核要点",width:"150"}),l(x,{prop:"description",label:"说明","show-overflow-tooltip":""}),l(x,{label:"风险",width:"60"},{default:t(({row:a})=>[n(_(re(a.risk_level)),1)]),_:1})]),_:1},8,["data"])]))]),_:1},8,["modelValue"]),l(pe,{modelValue:D.value,"onUpdate:modelValue":e[46]||(e[46]=a=>D.value=a),title:pl.value,width:"900px","close-on-click-modal":!1,onClose:We},{footer:t(()=>[s("div",Et,[l(r,{onClick:e[42]||(e[42]=a=>D.value=!1)},{default:t(()=>[...e[102]||(e[102]=[n("取消",-1)])]),_:1}),S.value===1?(u(),$(r,{key:0,type:"primary",onClick:vl,loading:Ce.value,disabled:!Ke.value},{default:t(()=>[l(m,null,{default:t(()=>[l(k(qe))]),_:1}),e[103]||(e[103]=n(" 生成标准 ",-1))]),_:1},8,["loading","disabled"])):z("",!0),S.value===2?(u(),y(N,{key:1},[l(r,{onClick:e[43]||(e[43]=a=>S.value=1)},{default:t(()=>[...e[104]||(e[104]=[n("上一步",-1)])]),_:1}),l(r,{type:"primary",onClick:e[44]||(e[44]=a=>S.value=3),disabled:!T.value.length||!E.value},{default:t(()=>[...e[105]||(e[105]=[n(" 下一步 ",-1)])]),_:1},8,["disabled"])],64)):z("",!0),S.value===3?(u(),y(N,{key:2},[l(r,{onClick:e[45]||(e[45]=a=>S.value=2)},{default:t(()=>[...e[106]||(e[106]=[n("上一步",-1)])]),_:1}),l(r,{type:"primary",onClick:cl,loading:xe.value},{default:t(()=>[...e[107]||(e[107]=[n(" 确认入库 ",-1)])]),_:1},8,["loading"])],64)):z("",!0)])]),default:t(()=>[l(xl,{active:S.value-1,"align-center":"",style:{"margin-bottom":"24px"}},{default:t(()=>[l(Ie,{title:"填写问卷",description:"提供业务信息"}),l(Ie,{title:"预览编辑",description:"确认生成的标准"}),l(Ie,{title:"确认入库",description:"保存到标准库"})]),_:1},8,["active"]),S.value===1?(u(),y("div",bt,[l(se,{model:i,"label-width":"120px","label-position":"top"},{default:t(()=>[s("div",Vt,[e[96]||(e[96]=s("div",{class:"form-section-title"},[s("span",{class:"required-badge"},"必答"),n(" 基本信息 ")],-1)),l(p,{label:"文档类型",required:""},{default:t(()=>[l($e,{modelValue:i.document_type,"onUpdate:modelValue":e[29]||(e[29]=a=>i.document_type=a)},{default:t(()=>[l(B,{value:"contract"},{default:t(()=>[...e[88]||(e[88]=[n("合同",-1)])]),_:1}),l(B,{value:"marketing"},{default:t(()=>[...e[89]||(e[89]=[n("营销材料",-1)])]),_:1}),l(B,{value:"both"},{default:t(()=>[...e[90]||(e[90]=[n("两者都有",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"标准语言",required:""},{default:t(()=>[l($e,{modelValue:i.language,"onUpdate:modelValue":e[30]||(e[30]=a=>i.language=a)},{default:t(()=>[l(B,{value:"zh-CN"},{default:t(()=>[...e[91]||(e[91]=[n("中文",-1)])]),_:1}),l(B,{value:"en"},{default:t(()=>[...e[92]||(e[92]=[n("English",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"适用场景",required:""},{default:t(()=>[l(b,{modelValue:i.business_scenario,"onUpdate:modelValue":e[31]||(e[31]=a=>i.business_scenario=a),type:"textarea",rows:3,placeholder:"请描述该审阅标准的适用场景，例如：审核SaaS服务协议，涉及订阅费用、服务级别承诺、数据安全等条款...",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),l(p,{label:"核心关注点",required:""},{default:t(()=>[s("div",kt,[l(Se,{modelValue:i.focus_areas,"onUpdate:modelValue":e[32]||(e[32]=a=>i.focus_areas=a)},{default:t(()=>[(u(),y(N,null,P(rl,a=>l(oe,{key:a,value:a,label:a},null,8,["value","label"])),64))]),_:1},8,["modelValue"]),l(r,{type:"primary",text:"",size:"small",class:"add-focus-btn",onClick:e[33]||(e[33]=a=>ae.value=!0)},{default:t(()=>[l(m,null,{default:t(()=>[l(k(Te))]),_:1}),e[93]||(e[93]=n(" 添加其他 ",-1))]),_:1})]),ae.value?(u(),y("div",wt,[l(b,{modelValue:J.value,"onUpdate:modelValue":e[34]||(e[34]=a=>J.value=a),placeholder:"输入关注点名称",size:"small",style:{width:"200px"},onKeyup:Ml(Ge,["enter"])},null,8,["modelValue"]),l(r,{type:"primary",size:"small",onClick:Ge},{default:t(()=>[...e[94]||(e[94]=[n("添加",-1)])]),_:1}),l(r,{size:"small",onClick:e[35]||(e[35]=a=>{ae.value=!1,J.value=""})},{default:t(()=>[...e[95]||(e[95]=[n("取消",-1)])]),_:1})])):z("",!0),A.value.length>0?(u(),y("div",Ct,[(u(!0),y(N,null,P(A.value,(a,I)=>(u(),$(L,{key:I,closable:"",size:"small",onClose:U=>dl(I)},{default:t(()=>[n(_(a),1)]),_:2},1032,["onClose"]))),128))])):z("",!0)]),_:1})]),s("div",xt,[e[97]||(e[97]=s("div",{class:"form-section-title"},[s("span",{class:"optional-badge"},"选答"),n(" 补充信息（帮助生成更精准的标准） ")],-1)),l(p,{label:"我方角色"},{default:t(()=>[l(b,{modelValue:i.our_role,"onUpdate:modelValue":e[36]||(e[36]=a=>i.our_role=a),placeholder:"例如：甲方/采购方/服务提供方/委托方"},null,8,["modelValue"])]),_:1}),l(p,{label:"所属行业"},{default:t(()=>[s("div",Ut,[l(q,{modelValue:i.industry,"onUpdate:modelValue":e[37]||(e[37]=a=>i.industry=a),placeholder:"选择行业",clearable:"",style:{width:"200px"}},{default:t(()=>[(u(),y(N,null,P(ml,a=>l(V,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(b,{modelValue:i.custom_industry,"onUpdate:modelValue":e[38]||(e[38]=a=>i.custom_industry=a),placeholder:"或输入其他行业",style:{width:"200px","margin-left":"12px"}},null,8,["modelValue"])])]),_:1}),l(p,{label:"特殊风险关注"},{default:t(()=>[l(b,{modelValue:i.special_risks,"onUpdate:modelValue":e[39]||(e[39]=a=>i.special_risks=a),type:"textarea",rows:2,placeholder:"如有特殊的审核要求，请在此说明"},null,8,["modelValue"])]),_:1}),l(p,{label:"参考材料"},{default:t(()=>[l(b,{modelValue:i.reference_material,"onUpdate:modelValue":e[40]||(e[40]=a=>i.reference_material=a),type:"textarea",rows:4,placeholder:"粘贴相关的法规条文、行业规范、已有合同模板等作为参考"},null,8,["modelValue"])]),_:1})])]),_:1},8,["model"])])):z("",!0),S.value===2?(u(),y("div",zt,[de.value?(u(),$(Fe,{key:0,type:"success",closable:!1,style:{"margin-bottom":"16px"}},{default:t(()=>[n(_(de.value),1)]),_:1})):z("",!0),s("div",St,[l(p,{label:"标准名称","label-width":"100px"},{default:t(()=>[l(b,{modelValue:E.value,"onUpdate:modelValue":e[41]||(e[41]=a=>E.value=a),placeholder:"AI生成的名称，可修改"},null,8,["modelValue"])]),_:1})]),l(ze,{data:T.value,border:"",size:"small","max-height":"350"},{default:t(()=>[l(x,{type:"expand"},{default:t(({row:a,$index:I})=>[s("div",$t,[l(se,{"label-width":"80px",size:"small"},{default:t(()=>[l(p,{label:"分类"},{default:t(()=>[l(b,{modelValue:a.category,"onUpdate:modelValue":U=>a.category=U},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{label:"审核要点"},{default:t(()=>[l(b,{modelValue:a.item,"onUpdate:modelValue":U=>a.item=U},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{label:"详细说明"},{default:t(()=>[l(b,{modelValue:a.description,"onUpdate:modelValue":U=>a.description=U,type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{label:"风险等级"},{default:t(()=>[l(q,{modelValue:a.risk_level,"onUpdate:modelValue":U=>a.risk_level=U},{default:t(()=>[l(V,{label:"高",value:"high"}),l(V,{label:"中",value:"medium"}),l(V,{label:"低",value:"low"})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{label:"适用类型"},{default:t(()=>[l(Se,{modelValue:a.applicable_to,"onUpdate:modelValue":U=>a.applicable_to=U},{default:t(()=>[l(oe,{label:"contract",value:"contract"},{default:t(()=>[...e[98]||(e[98]=[n("合同",-1)])]),_:1}),l(oe,{label:"marketing",value:"marketing"},{default:t(()=>[...e[99]||(e[99]=[n("营销材料",-1)])]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue"])]),_:2},1024),l(p,{label:"适用说明"},{default:t(()=>[l(b,{modelValue:a.usage_instruction,"onUpdate:modelValue":U=>a.usage_instruction=U,type:"textarea",rows:2},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),s("div",Ft,[l(r,{type:"danger",size:"small",onClick:U=>fl(I)},{default:t(()=>[...e[100]||(e[100]=[n(" 删除此标准 ",-1)])]),_:1},8,["onClick"])])])]),_:1}),l(x,{prop:"category",label:"分类",width:"100"}),l(x,{prop:"item",label:"审核要点",width:"150"}),l(x,{prop:"description",label:"说明","show-overflow-tooltip":""}),l(x,{label:"风险",width:"60",align:"center"},{default:t(({row:a})=>[l(L,{type:Ue(a.risk_level),size:"small"},{default:t(()=>[n(_(re(a.risk_level)),1)]),_:2},1032,["type"])]),_:1})]),_:1},8,["data"]),s("div",It,[l(m,null,{default:t(()=>[l(k(fe))]),_:1}),e[101]||(e[101]=n(" 点击行左侧展开按钮可编辑标准详情 ",-1))])])):z("",!0),S.value===3?(u(),y("div",Nt,[l(Fe,{type:"info",closable:!1,style:{"margin-bottom":"16px"}},{default:t(()=>[n(" 将创建标准「"+_(E.value)+"」，包含 "+_(T.value.length)+" 条审核条目 ",1)]),_:1}),s("div",Tt,[(u(!0),y(N,null,P(T.value,(a,I)=>(u(),y("div",{key:I,class:"usage-item"},[s("div",qt,[l(L,{type:Ue(a.risk_level),size:"small"},{default:t(()=>[n(_(re(a.risk_level)),1)]),_:2},1032,["type"]),s("span",Lt,_(a.category)+" - "+_(a.item),1)]),l(b,{modelValue:a.usage_instruction,"onUpdate:modelValue":U=>a.usage_instruction=U,type:"textarea",rows:2,placeholder:"说明该标准适用的条件，例如：适用于涉及支付条款的合同"},null,8,["modelValue","onUpdate:modelValue"])]))),128))])])):z("",!0)]),_:1},8,["modelValue","title"])])}}},Bt=Ul(At,[["__scopeId","data-v-27bdd614"]]);export{Bt as default};
